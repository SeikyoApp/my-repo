steps:
  # ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã‚¹ãƒ†ãƒƒãƒ—
  - name: 'python:3.9-slim'
    entrypoint: 'sh'
    args:
      - '-c'
      - |
        echo "ğŸ” Checking workspace contents..."
        ls -al
        echo "âš™ï¸ Installing dependencies..."
        pip install --upgrade pip
        pip install --target=/workspace/packages -r requirements.txt
        echo "ğŸ“¦ Installed packages:"
        pip list
    env:
      - "PYTHONPATH=/workspace/packages"

  # ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã‚¹ãƒ†ãƒƒãƒ—
  - name: 'python:3.9-slim'
    entrypoint: 'python'
    args:
      - '-c'
      - |
        import sys
        sys.path.append('/workspace/packages')  # ãƒ‘ã‚¹ã‚’è¿½åŠ 
        import requests
        import pandas
        print("âœ… Successfully imported requests and pandas!")
        exec(open("ClinicalTrials_gov_API.py").read())  # ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œ
    env:
      - "PYTHONPATH=/workspace/packages"

options:
  logging: CLOUD_LOGGING_ONLY

timeout: 600s
